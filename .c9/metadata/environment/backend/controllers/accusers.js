{"filter":false,"title":"accusers.js","tooltip":"/backend/controllers/accusers.js","undoManager":{"mark":57,"position":57,"stack":[[{"start":{"row":57,"column":47},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":88},{"start":{"row":58,"column":0},"end":{"row":58,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":58,"column":20},"end":{"row":58,"column":54},"action":"insert","lines":["res.redirect('/registardenuncia2')"],"id":89}],[{"start":{"row":58,"column":51},"end":{"row":58,"column":52},"action":"remove","lines":["2"],"id":90}],[{"start":{"row":58,"column":51},"end":{"row":58,"column":52},"action":"insert","lines":["1"],"id":91}],[{"start":{"row":65,"column":3},"end":{"row":66,"column":0},"action":"insert","lines":["",""],"id":92},{"start":{"row":66,"column":0},"end":{"row":67,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":67,"column":0},"end":{"row":94,"column":3},"action":"insert","lines":["router.post('/partners',[","    body('Name').not().isEmpty().withMessage('Name is a required field'),","    body('Email').isEmail().withMessage('A valid email is required'),","    body('Address').isLength({min: 5, max: 115}).withMessage('Address should have between 10 and 155 chars')","], function(req, res) {","    const errors = validationResult(req);","","    if (!errors.isEmpty()) {","      return res.status(400).json({ errors: errors.array() });","    }","    const idPartner = parseInt(req.params.id);","    const Name = req.body.Name;","    const Email = req.body.Email;","    const Telephone = req.body.Telephone;","    const Address = req.body.Address;","    const post = {idPartner: idPartner, Name: Name, Email: Email, Telephone: Telephone, Address:Address}","    const query = bd.connection.query('INSERT INTO Partners SET ?', post, function(err, rows, fields) {","                console.log(query.sql);","                if (!err) {","                    console.log(\"Database succesfully updated.\")","                }","                else {","                    console.log(err);","                    console.log(\"data missing\")","                }","            });","            res.end();","});"],"id":93}],[{"start":{"row":67,"column":14},"end":{"row":67,"column":22},"action":"remove","lines":["partners"],"id":94},{"start":{"row":67,"column":14},"end":{"row":67,"column":22},"action":"insert","lines":["accusers"]}],[{"start":{"row":4,"column":35},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":95}],[{"start":{"row":5,"column":0},"end":{"row":6,"column":21},"action":"insert","lines":["const { body, validationResult } = require('express-validator');","app.use('/', router);"],"id":96}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":21},"action":"remove","lines":["app.use('/', router);"],"id":97},{"start":{"row":2,"column":39},"end":{"row":3,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":78,"column":10},"end":{"row":78,"column":19},"action":"remove","lines":["idPartner"],"id":98},{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"insert","lines":["i"]},{"start":{"row":78,"column":11},"end":{"row":78,"column":12},"action":"insert","lines":["d"]},{"start":{"row":78,"column":12},"end":{"row":78,"column":13},"action":"insert","lines":["A"]}],[{"start":{"row":78,"column":10},"end":{"row":78,"column":13},"action":"remove","lines":["idA"],"id":99},{"start":{"row":78,"column":10},"end":{"row":78,"column":19},"action":"insert","lines":["idAccuser"]}],[{"start":{"row":79,"column":4},"end":{"row":82,"column":37},"action":"remove","lines":["const Name = req.body.Name;","    const Email = req.body.Email;","    const Telephone = req.body.Telephone;","    const Address = req.body.Address;"],"id":100},{"start":{"row":79,"column":4},"end":{"row":84,"column":41},"action":"insert","lines":["//const Username = req.body.Username;","    const Name = req.body.Name;","    const Email = req.body.Email;","    //const Password = req.body.Password;","    const Address = req.body.Address;","    const Telephone = req.body.Telephone;"]}],[{"start":{"row":85,"column":18},"end":{"row":85,"column":27},"action":"remove","lines":["idPartner"],"id":101},{"start":{"row":85,"column":18},"end":{"row":85,"column":19},"action":"insert","lines":["i"]},{"start":{"row":85,"column":19},"end":{"row":85,"column":20},"action":"insert","lines":["d"]}],[{"start":{"row":85,"column":18},"end":{"row":85,"column":20},"action":"remove","lines":["id"],"id":102},{"start":{"row":85,"column":18},"end":{"row":85,"column":27},"action":"insert","lines":["idAccuser"]}],[{"start":{"row":85,"column":4},"end":{"row":85,"column":104},"action":"remove","lines":["const post = {idAccuser: idPartner, Name: Name, Email: Email, Telephone: Telephone, Address:Address}"],"id":103},{"start":{"row":85,"column":4},"end":{"row":85,"column":84},"action":"insert","lines":["const post = {Name: Name, Email: Email, Address: Address, Telephone: Telephone};"]}],[{"start":{"row":86,"column":51},"end":{"row":86,"column":59},"action":"remove","lines":["Partners"],"id":104},{"start":{"row":86,"column":51},"end":{"row":86,"column":52},"action":"insert","lines":["A"]},{"start":{"row":86,"column":52},"end":{"row":86,"column":53},"action":"insert","lines":["c"]},{"start":{"row":86,"column":53},"end":{"row":86,"column":54},"action":"insert","lines":["c"]}],[{"start":{"row":86,"column":51},"end":{"row":86,"column":54},"action":"remove","lines":["Acc"],"id":105},{"start":{"row":86,"column":51},"end":{"row":86,"column":59},"action":"insert","lines":["Accounts"]}],[{"start":{"row":86,"column":58},"end":{"row":86,"column":59},"action":"remove","lines":["s"],"id":106},{"start":{"row":86,"column":57},"end":{"row":86,"column":58},"action":"remove","lines":["t"]},{"start":{"row":86,"column":56},"end":{"row":86,"column":57},"action":"remove","lines":["n"]},{"start":{"row":86,"column":55},"end":{"row":86,"column":56},"action":"remove","lines":["u"]},{"start":{"row":86,"column":54},"end":{"row":86,"column":55},"action":"remove","lines":["o"]}],[{"start":{"row":86,"column":54},"end":{"row":86,"column":56},"action":"insert","lines":["  "],"id":107}],[{"start":{"row":86,"column":55},"end":{"row":86,"column":56},"action":"remove","lines":[" "],"id":108},{"start":{"row":86,"column":54},"end":{"row":86,"column":55},"action":"remove","lines":[" "]}],[{"start":{"row":86,"column":54},"end":{"row":86,"column":55},"action":"insert","lines":["u"],"id":109}],[{"start":{"row":86,"column":51},"end":{"row":86,"column":55},"action":"remove","lines":["Accu"],"id":110},{"start":{"row":86,"column":51},"end":{"row":86,"column":59},"action":"insert","lines":["Accusers"]}],[{"start":{"row":36,"column":7},"end":{"row":37,"column":0},"action":"insert","lines":["",""],"id":111},{"start":{"row":37,"column":0},"end":{"row":37,"column":1},"action":"insert","lines":["/"]}],[{"start":{"row":37,"column":1},"end":{"row":37,"column":2},"action":"insert","lines":["*"],"id":112}],[{"start":{"row":68,"column":0},"end":{"row":68,"column":1},"action":"insert","lines":["*"],"id":113},{"start":{"row":68,"column":1},"end":{"row":68,"column":2},"action":"insert","lines":["/"]}],[{"start":{"row":94,"column":47},"end":{"row":95,"column":0},"action":"insert","lines":["",""],"id":114},{"start":{"row":95,"column":0},"end":{"row":95,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":95,"column":20},"end":{"row":95,"column":54},"action":"insert","lines":["res.redirect('/registardenuncia1')"],"id":115}],[{"start":{"row":72,"column":91},"end":{"row":72,"column":92},"action":"remove","lines":["0"],"id":116},{"start":{"row":72,"column":90},"end":{"row":72,"column":91},"action":"remove","lines":["1"]}],[{"start":{"row":72,"column":90},"end":{"row":72,"column":91},"action":"insert","lines":["5"],"id":117}],[{"start":{"row":90,"column":64},"end":{"row":91,"column":0},"action":"insert","lines":["",""],"id":118},{"start":{"row":91,"column":0},"end":{"row":91,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":91,"column":20},"end":{"row":91,"column":54},"action":"insert","lines":["res.redirect('/registardenuncia2')"],"id":119}],[{"start":{"row":99,"column":12},"end":{"row":99,"column":13},"action":"insert","lines":["/"],"id":120},{"start":{"row":99,"column":13},"end":{"row":99,"column":14},"action":"insert","lines":["/"]}],[{"start":{"row":37,"column":0},"end":{"row":68,"column":2},"action":"remove","lines":["/*","router.post('/accusers',(req,res,next)=>{","    const idAccuser = req.body.idAccuser;","    //const Username = req.body.Username;","    const Name = req.body.Name;","    const Email = req.body.Email;","    //const Password = req.body.Password;","    const Address = req.body.Address;","    const Telephone = req.body.Telephone;","        if (Name != \"NULL\" && Email != \"NULL\" && typeof(Name) != \"undefined\") {","            const post = {Name: Name, Email: Email, Address: Address, Telephone: Telephone};","            //const post = {Username: Username, Name: Name, Email: Email, Password: Password, Address: Address, Telephone: Telephone};","            //criar e executar a query de gravação na BD para inserir os dados presentes no post","            const query = bd.connection.query('INSERT INTO Accusers SET ?', post, function(err, rows, fields) {","                console.log(query.sql);","                if (!err) {","                    console.log(\"Database succesfully updated.\")","                    //res.sendFile(__dirname + '../../frontend/formularios/operacoes/form_RegistarDenuncia_p2.html');","                    res.redirect('/registardenuncia2')","                }","                else {","                    console.log(err);","                    console.log(\"data missing\")","                    res.redirect('/registardenuncia1')","                }","            });","        }","        else","            console.log(\"data\")","            //res.end(); ","});","*/"],"id":121},{"start":{"row":36,"column":7},"end":{"row":37,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":48,"column":5},"end":{"row":48,"column":6},"action":"remove","lines":["/"],"id":122},{"start":{"row":48,"column":4},"end":{"row":48,"column":5},"action":"remove","lines":["/"]}],[{"start":{"row":51,"column":5},"end":{"row":51,"column":6},"action":"remove","lines":["/"],"id":123},{"start":{"row":51,"column":4},"end":{"row":51,"column":5},"action":"remove","lines":["/"]}],[{"start":{"row":54,"column":18},"end":{"row":54,"column":19},"action":"insert","lines":["U"],"id":124},{"start":{"row":54,"column":19},"end":{"row":54,"column":20},"action":"insert","lines":["S"]},{"start":{"row":54,"column":20},"end":{"row":54,"column":21},"action":"insert","lines":["e"]},{"start":{"row":54,"column":21},"end":{"row":54,"column":22},"action":"insert","lines":["r"]}],[{"start":{"row":54,"column":21},"end":{"row":54,"column":22},"action":"remove","lines":["r"],"id":125},{"start":{"row":54,"column":20},"end":{"row":54,"column":21},"action":"remove","lines":["e"]},{"start":{"row":54,"column":19},"end":{"row":54,"column":20},"action":"remove","lines":["S"]}],[{"start":{"row":54,"column":19},"end":{"row":54,"column":20},"action":"insert","lines":["e"],"id":126},{"start":{"row":54,"column":20},"end":{"row":54,"column":21},"action":"insert","lines":["s"]}],[{"start":{"row":54,"column":20},"end":{"row":54,"column":21},"action":"remove","lines":["s"],"id":127},{"start":{"row":54,"column":19},"end":{"row":54,"column":20},"action":"remove","lines":["e"]}],[{"start":{"row":54,"column":19},"end":{"row":54,"column":20},"action":"insert","lines":["s"],"id":128}],[{"start":{"row":54,"column":18},"end":{"row":54,"column":20},"action":"remove","lines":["Us"],"id":129},{"start":{"row":54,"column":18},"end":{"row":54,"column":26},"action":"insert","lines":["Username"]}],[{"start":{"row":54,"column":26},"end":{"row":54,"column":27},"action":"insert","lines":[":"],"id":130}],[{"start":{"row":54,"column":27},"end":{"row":54,"column":28},"action":"insert","lines":[" "],"id":131},{"start":{"row":54,"column":28},"end":{"row":54,"column":29},"action":"insert","lines":["U"]},{"start":{"row":54,"column":29},"end":{"row":54,"column":30},"action":"insert","lines":["s"]}],[{"start":{"row":54,"column":28},"end":{"row":54,"column":30},"action":"remove","lines":["Us"],"id":132},{"start":{"row":54,"column":28},"end":{"row":54,"column":36},"action":"insert","lines":["Username"]}],[{"start":{"row":54,"column":36},"end":{"row":54,"column":37},"action":"insert","lines":[","],"id":133}],[{"start":{"row":54,"column":37},"end":{"row":54,"column":38},"action":"insert","lines":[" "],"id":134}],[{"start":{"row":54,"column":64},"end":{"row":54,"column":65},"action":"insert","lines":["P"],"id":135},{"start":{"row":54,"column":65},"end":{"row":54,"column":66},"action":"insert","lines":["a"]},{"start":{"row":54,"column":66},"end":{"row":54,"column":67},"action":"insert","lines":["s"]},{"start":{"row":54,"column":67},"end":{"row":54,"column":68},"action":"insert","lines":["s"]}],[{"start":{"row":54,"column":64},"end":{"row":54,"column":68},"action":"remove","lines":["Pass"],"id":136},{"start":{"row":54,"column":64},"end":{"row":54,"column":72},"action":"insert","lines":["Password"]}],[{"start":{"row":54,"column":72},"end":{"row":54,"column":73},"action":"insert","lines":[":"],"id":137},{"start":{"row":54,"column":73},"end":{"row":54,"column":74},"action":"insert","lines":["P"]},{"start":{"row":54,"column":74},"end":{"row":54,"column":75},"action":"insert","lines":["a"]},{"start":{"row":54,"column":75},"end":{"row":54,"column":76},"action":"insert","lines":["s"]},{"start":{"row":54,"column":76},"end":{"row":54,"column":77},"action":"insert","lines":["s"]}],[{"start":{"row":54,"column":73},"end":{"row":54,"column":77},"action":"remove","lines":["Pass"],"id":138},{"start":{"row":54,"column":73},"end":{"row":54,"column":81},"action":"insert","lines":["Password"]}],[{"start":{"row":54,"column":81},"end":{"row":54,"column":82},"action":"insert","lines":[","],"id":139}],[{"start":{"row":54,"column":82},"end":{"row":54,"column":83},"action":"insert","lines":[" "],"id":140}],[{"start":{"row":67,"column":13},"end":{"row":67,"column":14},"action":"remove","lines":["/"],"id":141},{"start":{"row":67,"column":12},"end":{"row":67,"column":13},"action":"remove","lines":["/"]}],[{"start":{"row":67,"column":12},"end":{"row":67,"column":13},"action":"insert","lines":["/"],"id":142},{"start":{"row":67,"column":13},"end":{"row":67,"column":14},"action":"insert","lines":["/"]}],[{"start":{"row":54,"column":73},"end":{"row":54,"column":74},"action":"insert","lines":[" "],"id":143}],[{"start":{"row":67,"column":13},"end":{"row":67,"column":14},"action":"remove","lines":["/"],"id":144},{"start":{"row":67,"column":12},"end":{"row":67,"column":13},"action":"remove","lines":["/"]}],[{"start":{"row":67,"column":12},"end":{"row":67,"column":13},"action":"insert","lines":["/"],"id":145},{"start":{"row":67,"column":13},"end":{"row":67,"column":14},"action":"insert","lines":["/"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":55,"column":58},"end":{"row":55,"column":58},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1610578440252,"hash":"c249f64980e208d625555d3395c34a414105a5ff"}