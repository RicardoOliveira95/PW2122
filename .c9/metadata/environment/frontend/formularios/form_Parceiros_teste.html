{"filter":false,"title":"form_Parceiros_teste.html","tooltip":"/frontend/formularios/form_Parceiros_teste.html","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":92,"column":4},"end":{"row":92,"column":5},"action":"remove","lines":[" "],"id":2},{"start":{"row":92,"column":0},"end":{"row":92,"column":4},"action":"remove","lines":["    "]},{"start":{"row":91,"column":8},"end":{"row":92,"column":3},"action":"remove","lines":["","   "]},{"start":{"row":91,"column":4},"end":{"row":91,"column":8},"action":"remove","lines":["    "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":4},"action":"remove","lines":["    "]},{"start":{"row":90,"column":8},"end":{"row":91,"column":0},"action":"remove","lines":["",""]},{"start":{"row":90,"column":4},"end":{"row":90,"column":8},"action":"remove","lines":["    "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":4},"action":"remove","lines":["    "]},{"start":{"row":89,"column":1},"end":{"row":90,"column":0},"action":"remove","lines":["",""]},{"start":{"row":89,"column":0},"end":{"row":89,"column":1},"action":"remove","lines":[" "]},{"start":{"row":88,"column":8},"end":{"row":89,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":88,"column":4},"end":{"row":88,"column":8},"action":"remove","lines":["    "],"id":3},{"start":{"row":88,"column":0},"end":{"row":88,"column":4},"action":"remove","lines":["    "]},{"start":{"row":87,"column":8},"end":{"row":88,"column":0},"action":"remove","lines":["",""]},{"start":{"row":87,"column":4},"end":{"row":87,"column":8},"action":"remove","lines":["    "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":4},"action":"remove","lines":["    "]},{"start":{"row":86,"column":15},"end":{"row":87,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":133,"column":2},"end":{"row":134,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":136,"column":0},"end":{"row":303,"column":9},"action":"remove","lines":["<script type=\"text/javascript\">","window.onload = () => {","    // References to HTML objects   ","    //const btnPartner = document.getElementById(\"btnPartner\")","    const myDataTable = document.getElementById(\"myDataTable\")","","    const renderPartners = async () => {","        let strHtml = `","            <thead>","            <tr>","                <th>ID</th>","                <th>Nome</th>","                <th>Contacto</th>","                <th>Email</th>","                <th>Morada</th>","                <th>Ações</th>","                ","                <input type=\"text\" placeholder=\"Search..\" name=\"search\" id=\"query\" onkeyup=\"searchData()\">","                <button type=\"submit\" value=\"search\" onclick=\"searchData()\"><i class=\"fa fa-search\" id=\"searchBar\">","                ","                ","            </tr>","     </thead><tbody>","        `","        const response = await fetch(`http://3.236.5.255:8080/partners`)","        const partners = await response.json()","        let i = 1","        for (const partner of partners) { ","            strHtml += `","                <tr>","                    <td id=\"row${partner.idPartner}\">${partner.idPartner}</td>","                    <td id=\"name_row${partner.idPartner}\" data-value=\"${partner.Name}\">${partner.Name}</td>","                    <td id=\"email_row${partner.idPartner}\">${partner.Email}</td>","                    <td id=\"tel_row${partner.idPartner}\">${partner.Telephone}</td>","                    <td id=\"add_row${partner.idPartner}\">${partner.Address}</td>","                    <td><i id='${partner.idPartner}' class='fas fa-trash-alt remove'></i></td>","                    <td> <i class=\"far fa-edit\"></i> <i id='${partner.idPartner}' class='fas fa-trash-alt remove'></i></td>","                </tr>","                <td><input type=\"button\" id=\"edit_button${partner.idPartner}\" value=\"Edit\" class=\"edit\" onclick=\"edit_row('${partner.idPartner}')\"></td>","                <td><i name=\"${partner.idPartner}\" id=\"save_button${partner.idPartner}\" value=\"Save\" class=\"fa fa-save\" onclick=\"save_row('${partner.idPartner}')\"></td>","            `        ","            i++","        }","        strHtml += \"</tbody>\"","        myDataTable.innerHTML = strHtml;","       ","","        // Manage click delete        ","        const btnDelete = document.getElementsByClassName(\"remove\")","        for (let i = 0; i < btnDelete.length; i++) {","            btnDelete[i].addEventListener(\"click\", () => {","                swal({","                    title: 'Tem a certeza?',","                    text: \"Não será possível reverter a remoção!\",","                    type: 'warning',","                    showCancelButton: true,","                    confirmButtonColor: '#3085d6',","                    cancelButtonColor: '#d33',","                    cancelButtonText: 'Cancelar',","                    confirmButtonText: 'Remover'","                  }).then( async (result) => {","                    if (result.value) {                        ","                        let partnerId = btnDelete[i].getAttribute(\"id\")","                        try {","                            const response = await fetch(`http://3.236.5.255:8080/partners/${partnerId}`, { method: \"DELETE\"})","                            const participants = await response.json()                            ","                            swal('Removido!','O participante foi removido da Conferência.','success')","                            renderPartners()","                        } catch(err) {","                            swal({type: 'error', title: 'Erro', text: err})","                        }","                    } ","                  })","            })","        }       ","    }","    ","    //UPDATE","        const saveBtn = document.getElementsByClassName(\"fa fa-save\")","        for (let i = 0; i < saveBtn.length; i++) {","            saveBtn[i].addEventListener(\"click\", () => {","                console.log(\"fetch\")","                swal({","                    title: 'Tem a certeza?',","                    text: \"Esta linha sera alterada na base de dados!\",","                    type: 'warning',","                    showCancelButton: true,","                    confirmButtonColor: '#3075d6',","                    cancelButtonColor: '#d34',","                    cancelButtonText: 'Cancelar',","                    confirmButtonText: 'Alterar'","                  }).then( async (result) => {","                    if (result.value) {                        ","                        let idPartner = saveBtn[i].getAttribute(\"name\")","                        var Name=document.getElementById(\"name_row\"+idPartner).innerHTML;","                        var Email=document.getElementById(\"email_row\"+idPartner).innerHTML;","                        var Telephone=document.getElementById(\"tel_row\"+idPartner).innerHTML;","                        var Address=document.getElementById(\"add_row\"+idPartner).innerHTML;","                        console.log(Name+ Email+ Telephone+ Address)","                        try {","                            const response = await fetch(`http://3.236.5.255:8080/partners/${idPartner}`, { method: \"PUT\",body: `Name=${Name}&Email=${Email}&Telephone=${Telephone}&Address=${Address}`,","                                headers: {\"Content-type\": \"application/x-www-form-urlencoded\"}})","                            const partners = await response.json()                            ","                            swal('Actualizado!','O parceiro foi alterado na base de dados.','success')","                    ","                        } catch(err) {","                            swal({type: 'error', title: 'Erro', text: err})","                        }","                    }","                  ","                  })","            })","        }","        ","renderPartners()","","}","","","function edit_row(no){","document.getElementById(\"edit_button\"+no).style.display=\"none\";","document.getElementById(\"save_button\"+no).style.display=\"block\";",""," var name=document.getElementById(\"name_row\"+no);"," var email=document.getElementById(\"email_row\"+no);"," var telephone=document.getElementById(\"tel_row\"+no);"," var address=document.getElementById(\"add_row\"+no);"," "," ","    "," var nome_data=name.innerHTML;"," var email_data=email.innerHTML;"," var telefone_data=telephone.innerHTML;"," var morada_data=address.innerHTML;"," ","    "," name.innerHTML=\"<input type='text' id='name_text\"+no+\"' value='\"+nome_data+\"'>\";"," email.innerHTML=\"<input type='text' id='email_text\"+no+\"' value='\"+email_data+\"'>\";"," telephone.innerHTML=\"<input type='text' id='tel_text\"+no+\"' value='\"+telefone_data+\"'>\";"," address.innerHTML=\"<input type='text' id='add_text\"+no+\"' value='\"+morada_data+\"'>\";"," "," ","}","function save_row(no){","console.log(\"save\")"," var name_val=document.getElementById(\"name_text\"+no).value;"," var email_val=document.getElementById(\"email_text\"+no).value;"," var tel_val=document.getElementById(\"tel_text\"+no).value;"," var add_val=document.getElementById(\"add_text\"+no).value;"," ",""," document.getElementById(\"name_row\"+no).innerHTML=name_val;"," document.getElementById(\"email_row\"+no).innerHTML=email_val;"," document.getElementById(\"tel_row\"+no).innerHTML=tel_val;"," document.getElementById(\"add_row\"+no).innerHTML=add_val;","",""," document.getElementById(\"edit_button\"+no).style.display=\"block\";"," document.getElementById(\"save_button\"+no).style.display=\"none\";","",""," var name=document.getElementById(\"name_row\"+no);"," var email=document.getElementById(\"email_row\"+no);"," var telephone=document.getElementById(\"tel_row\"+no);"," var address=document.getElementById(\"add_row\"+no);","}","","</script>"],"id":5}],[{"start":{"row":135,"column":9},"end":{"row":136,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":136,"column":0},"end":{"row":331,"column":9},"action":"insert","lines":[" <script type=\"text/javascript\">","\twindow.onload=()=>{","const tblPartners = document.getElementById(\"tblPartners\")","//GET","const renderPartners = async () => {","        let strHtml = `","            <thead>","                <tr><th class='w-120 text-center bg-warning' colspan='4'>Lista de Pedidos</th></tr>","                <tr class='bg-info'>","                    <th class='w-2'>id</th>","                    <th class='w-20'>Nome</th>","                    <th class='w-30'>E-mail</th>              ","                    <th class='w-10'>Telefone</th>","                    <th class='w-60'>Morada</th>              ","                </tr> ","            </thead><tbody>","        `","        const response = await fetch('http://3.239.48.197:8080/partners')","        const partners = await response.json()","        let i = 1","        for (const partner of partners) {            ","            strHtml += `<tr>","                    <td id=\"row${partner.idPartner}\">${partner.idPartner}</td>","                    <td id=\"name_row${partner.idPartner}\" data-value=\"${partner.Name}\">${partner.Name}</td>","                    <td id=\"email_row${partner.idPartner}\">${partner.Email}</td>","                    <td id=\"tel_row${partner.idPartner}\">${partner.Telephone}</td>","                    <td id=\"add_row${partner.idPartner}\">${partner.Address}</td>","                    <td><i id='${partner.idPartner}' class='fas fa-trash-alt remove'></i></td>","                    <td><input type=\"button\" id=\"edit_button${partner.idPartner}\" value=\"Edit\" class=\"edit\" onclick=\"edit_row('${partner.idPartner}')\"></td>","                    <td><i name=\"${partner.idPartner}\" id=\"save_button${partner.idPartner}\" value=\"Save\" class=\"fa fa-save\" onclick=\"save_row('${partner.idPartner}')\"></td>","                </tr>`","            i++","        }","        strHtml += \"</tbody>\"","        tblPartners.innerHTML = strHtml","        ","        //Search:id","        const searchBtn = document.getElementById(\"searchBar\")","        searchBtn.addEventListener(\"click\",function(){","        ","        const query = document.getElementById(\"query\");","        filter = query.value.toUpperCase();","        var tr = tblPartners.getElementsByTagName(\"tr\");","        // loop table row and hide those that don't match","        //console.log(tr.length)","        for (i = 0; i < tr.length; i++) {","        var td = tr[i].getElementsByTagName(\"td\")[0];","        if (td) {","            console.log(\"TD\")","          const txtValue = td.textContent || td.innerText;","          if (txtValue.toUpperCase().indexOf(filter) > -1) {","            tr[i].style.display = \"\";","          } else {","            tr[i].style.display = \"none\";","          }","        } ","      }","    });","        ","        //DELETE","        const btnDelete = document.getElementsByClassName(\"remove\")","        for (let i = 0; i < btnDelete.length; i++) {","            btnDelete[i].addEventListener(\"click\", () => {","                swal({","                    title: 'Tem a certeza?',","                    text: \"Nao sera possivel reverter a remocao!\",","                    type: 'warning',","                    showCancelButton: true,","                    confirmButtonColor: '#3085d6',","                    cancelButtonColor: '#d33',","                    cancelButtonText: 'Cancelar',","                    confirmButtonText: 'Remover'","                  }).then( async (result) => {","                    if (result.value) {                        ","                        let idPartner = btnDelete[i].getAttribute(\"id\")","                        try {","                            const response = await fetch(`http://35.172.195.91:8080/partners/${idPartner}`, { method: \"DELETE\"})","                            const partners = await response.json()                            ","                            swal('Removido!','O parceiro foi removido da tabela.','success')","                            renderPartners()","                        } catch(err) {","                            swal({type: 'error', title: 'Erro', text: err})","                        }","                    } ","                  })","            })","        }","        ","        //UPDATE","        const saveBtn = document.getElementsByClassName(\"fa fa-save\")","        for (let i = 0; i < saveBtn.length; i++) {","            saveBtn[i].addEventListener(\"click\", () => {","                console.log(\"fetch\")","                swal({","                    title: 'Tem a certeza?',","                    text: \"Esta linha sera alterada na base de dados!\",","                    type: 'warning',","                    showCancelButton: true,","                    confirmButtonColor: '#3075d6',","                    cancelButtonColor: '#d34',","                    cancelButtonText: 'Cancelar',","                    confirmButtonText: 'Alterar'","                  }).then( async (result) => {","                    if (result.value) {                        ","                        let idPartner = saveBtn[i].getAttribute(\"name\")","                        var Name=document.getElementById(\"name_row\"+idPartner).innerHTML;","                        console.log(Name);","                        var Email=document.getElementById(\"email_row\"+idPartner).innerHTML;","                        var Telephone=document.getElementById(\"tel_row\"+idPartner).innerHTML;","                        var Address=document.getElementById(\"add_row\"+idPartner).innerHTML;","                        console.log(Name+ Email+ Telephone+ Address)","                        /*let data={","                            Name: Name,","                            Email: Email,","                            Telephone: Telephone,","                            Address: Address","                        }*/","                        try {","                            const response = await fetch(`http://3.239.48.197:8080/partners/${idPartner}`, { method: \"PUT\",body: `Name=${Name}&Email=${Email}&Telephone=${Telephone}&Address=${Address}`,","                                headers: {\"Content-type\": \"application/x-www-form-urlencoded\"}})","                            const partners = await response.json()                            ","                            swal('Actualizado!','O parceiro foi alterado na base de dados.','success')","                            //renderPartners()","                        } catch(err) {","                            swal({type: 'error', title: 'Erro', text: err})","                        }","                    } ","                  })","            })","        }","        }","        renderPartners()","    }","    function edit_row(no){","    document.getElementById(\"edit_button\"+no).style.display=\"none\";","    document.getElementById(\"save_button\"+no).style.display=\"block\";",""," var name=document.getElementById(\"name_row\"+no);"," var email=document.getElementById(\"email_row\"+no);"," var telephone=document.getElementById(\"tel_row\"+no);"," var address=document.getElementById(\"add_row\"+no);","    "," var nome_data=name.innerHTML;"," var email_data=email.innerHTML;"," var telefone_data=telephone.innerHTML;"," var morada_data=address.innerHTML;","    "," name.innerHTML=\"<input type='text' id='name_text\"+no+\"' value='\"+nome_data+\"'>\";"," email.innerHTML=\"<input type='text' id='email_text\"+no+\"' value='\"+email_data+\"'>\";"," telephone.innerHTML=\"<input type='text' id='tel_text\"+no+\"' value='\"+telefone_data+\"'>\";"," address.innerHTML=\"<input type='text' id='add_text\"+no+\"' value='\"+morada_data+\"'>\";","}","","function save_row(no){","console.log(\"save\")"," var name_val=document.getElementById(\"name_text\"+no).value;"," var email_val=document.getElementById(\"email_text\"+no).value;"," var tel_val=document.getElementById(\"tel_text\"+no).value;"," var add_val=document.getElementById(\"add_text\"+no).value;",""," document.getElementById(\"name_row\"+no).innerHTML=name_val;"," document.getElementById(\"email_row\"+no).innerHTML=email_val;"," document.getElementById(\"tel_row\"+no).innerHTML=tel_val;"," document.getElementById(\"add_row\"+no).innerHTML=add_val;",""," document.getElementById(\"edit_button\"+no).style.display=\"block\";"," document.getElementById(\"save_button\"+no).style.display=\"none\";",""," var name=document.getElementById(\"name_row\"+no);"," var email=document.getElementById(\"email_row\"+no);"," var telephone=document.getElementById(\"tel_row\"+no);"," var address=document.getElementById(\"add_row\"+no);","}","","function searchData(){","    var tbl = document.getElementById(\"tblPartners\");","    var query = document.getElementById(\"query\");","    filter = query.value.toUpperCase();","    var tr = tbl.getElementsByTagName(\"tr\");","    console.log(\"SEARCH\")","    // loop table row and hide those that don't match","    console.log(tr.length)","    for (i = 0; i < tr.length; i++) {","    var td = tr[i].getElementsByTagName(\"td\")[0];","    if (td) {","        console.log(\"TD\")","      const txtValue = td.textContent || td.innerText;","      if (txtValue.toUpperCase().indexOf(filter) > -1) {","        tr[i].style.display = \"\";","      } else {","        tr[i].style.display = \"none\";","      }","    } ","  }","}","</script>"],"id":7}],[{"start":{"row":153,"column":45},"end":{"row":153,"column":57},"action":"remove","lines":["3.239.48.197"],"id":8},{"start":{"row":153,"column":45},"end":{"row":153,"column":46},"action":"insert","lines":["c"]}],[{"start":{"row":153,"column":45},"end":{"row":153,"column":46},"action":"remove","lines":["c"],"id":9}],[{"start":{"row":153,"column":45},"end":{"row":153,"column":56},"action":"insert","lines":["3.236.5.255"],"id":10}],[{"start":{"row":212,"column":65},"end":{"row":212,"column":78},"action":"remove","lines":["35.172.195.91"],"id":11},{"start":{"row":212,"column":65},"end":{"row":212,"column":76},"action":"insert","lines":["3.236.5.255"]}],[{"start":{"row":254,"column":65},"end":{"row":254,"column":77},"action":"remove","lines":["3.239.48.197"],"id":12},{"start":{"row":254,"column":65},"end":{"row":254,"column":76},"action":"insert","lines":["3.236.5.255"]}],[{"start":{"row":138,"column":6},"end":{"row":138,"column":17},"action":"remove","lines":["tblPartners"],"id":13},{"start":{"row":138,"column":6},"end":{"row":138,"column":17},"action":"insert","lines":["myDataTable"]}],[{"start":{"row":138,"column":45},"end":{"row":138,"column":56},"action":"remove","lines":["tblPartners"],"id":14},{"start":{"row":138,"column":45},"end":{"row":138,"column":56},"action":"insert","lines":["myDataTable"]}],[{"start":{"row":170,"column":8},"end":{"row":170,"column":19},"action":"remove","lines":["tblPartners"],"id":15},{"start":{"row":170,"column":8},"end":{"row":170,"column":19},"action":"insert","lines":["myDataTable"]}],[{"start":{"row":311,"column":39},"end":{"row":311,"column":50},"action":"remove","lines":["tblPartners"],"id":16},{"start":{"row":311,"column":39},"end":{"row":311,"column":50},"action":"insert","lines":["myDataTable"]}],[{"start":{"row":178,"column":17},"end":{"row":178,"column":28},"action":"remove","lines":["tblPartners"],"id":17},{"start":{"row":178,"column":17},"end":{"row":178,"column":28},"action":"insert","lines":["myDataTable"]}],[{"start":{"row":142,"column":12},"end":{"row":151,"column":27},"action":"remove","lines":["<thead>","                <tr><th class='w-120 text-center bg-warning' colspan='4'>Lista de Pedidos</th></tr>","                <tr class='bg-info'>","                    <th class='w-2'>id</th>","                    <th class='w-20'>Nome</th>","                    <th class='w-30'>E-mail</th>              ","                    <th class='w-10'>Telefone</th>","                    <th class='w-60'>Morada</th>              ","                </tr> ","            </thead><tbody>"],"id":20},{"start":{"row":142,"column":12},"end":{"row":156,"column":20},"action":"insert","lines":["<thead>","            <tr>","                <th>ID</th>","                <th>Nome</th>","                <th>Contacto</th>","                <th>Email</th>","                <th>Morada</th>","                <th>Ações</th>","                ","                <input type=\"text\" placeholder=\"Search..\" name=\"search\" id=\"query\" onkeyup=\"searchData()\">","                <button type=\"submit\" value=\"search\" onclick=\"searchData()\"><i class=\"fa fa-search\" id=\"searchBar\">","                ","                ","            </tr>","     </thead><tbody>"]}]]},"ace":{"folds":[],"scrolltop":2383,"scrollleft":3,"selection":{"start":{"row":156,"column":20},"end":{"row":156,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":147,"state":["js-string.quasi.start","js-no_regex"],"mode":"ace/mode/html"}},"timestamp":1608580026976,"hash":"f8ed7a8107dcbe4a542cee38fc5bc6b5eeb4b710"}